<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="HackPDM.Src.Forms.Hack.HackFileManager"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:ui="using:CommunityToolkit.WinUI"
    xmlns:muxc="using:Microsoft.UI.Xaml.Controls"
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">
    <Grid Margin="12">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- TreeView for Directories -->
        <muxc:TreeView x:Name="OdooDirectoryTree" Grid.Row="0" Grid.Column="0" Grid.RowSpan="2" Width="321" Margin="0,0,10,0" VerticalAlignment="Stretch">
            <muxc:TreeView.ContextFlyout>
                <MenuFlyout>
                    <MenuFlyoutSubItem Text="Get Latest">
                        <MenuFlyoutSubItem.Icon>
                            <FontIcon Glyph="&#xE7AD;"/>
                        </MenuFlyoutSubItem.Icon>
                        <MenuFlyoutItem Text="Top Directory"/>
                        <MenuFlyoutItem Text="All Directories"/>
                    </MenuFlyoutSubItem>
                    <MenuFlyoutSeparator/>
                    <MenuFlyoutItem Text="Checkout"/>
                    <MenuFlyoutItem Text="Commit"/>
                    <MenuFlyoutItem Text="Undo Checkout"/>
                    <MenuFlyoutSeparator/>
                    <MenuFlyoutItem Text="Analyze"/>
                    <MenuFlyoutSeparator/>
                    <MenuFlyoutItem Text="Delete"/>
                    <MenuFlyoutItem Text="Logical Delete"/>
                    <MenuFlyoutItem Text="Permanent Delete"/>
                    <MenuFlyoutItem Text="UnDelete"/>
                    <MenuFlyoutItem Text="Local Delete"/>
                    <MenuFlyoutSeparator/>
                    <MenuFlyoutItem Text="Open Directory"/>
                </MenuFlyout>
            </muxc:TreeView.ContextFlyout>
        </muxc:TreeView>

        <!-- TabView for file lists -->
        <muxc:TabView x:Name="ListTabs" Grid.Row="0" Grid.Column="1" Grid.RowSpan="2" Margin="0,0,10,0">
            <muxc:TabView.Resources>
                <Style TargetType="muxc:TabViewItem">
                    <Setter Property="Background" Value="Transparent"/>
                </Style>
            </muxc:TabView.Resources>
            <muxc:TabViewItem Header="Entries" IsClosable="False">
                <ListView x:Name="OdooEntryList">
                    <ListView.ContextFlyout>
                        <MenuFlyout>
                            <MenuFlyoutItem Text="Get Latest"/>
                            <MenuFlyoutItem Text="Checkout"/>
                            <MenuFlyoutItem Text="Commit"/>
                            <MenuFlyoutItem Text="Undo Checkout"/>
                            <MenuFlyoutItem Text="Delete"/>
                            <MenuFlyoutSubItem Text="Open">
                                <MenuFlyoutItem Text="Preview Latest Remote"/>
                                <MenuFlyoutItem Text="Latest Local"/>
                                <MenuFlyoutItem Text="File Directory"/>
                            </MenuFlyoutSubItem>
                        </MenuFlyout>
                    </ListView.ContextFlyout>
                </ListView>
            </muxc:TabViewItem>
            <muxc:TabViewItem Header="Changes" IsClosable="False">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <ListView x:Name="HackChangesList" Grid.Column="0"/>
                    <ListView x:Name="OdooChangesList" Grid.Column="1"/>
                </Grid>
            </muxc:TabViewItem>
        </muxc:TabView>

        <!-- Right-side controls (image, version tabs) -->
        <muxc:TabView x:Name="VersionTabs" Grid.Row="1" Grid.Column="2" Grid.RowSpan="2" Margin="10,0,0,0">
            <muxc:TabViewItem Header="History">
                <ListView x:Name="OdooHistory"/>
            </muxc:TabViewItem>
            <muxc:TabViewItem Header="Where Used">
                <ListView x:Name="OdooParents"/>
            </muxc:TabViewItem>
            <muxc:TabViewItem Header="Dependents">
                <ListView x:Name="OdooChildren"/>
            </muxc:TabViewItem>
            <muxc:TabViewItem Header="Properties">
                <ListView x:Name="OdooProperties"/>
            </muxc:TabViewItem>
            <muxc:TabViewItem Header="Info">
                <ListView x:Name="OdooVersionInfoList"/>
            </muxc:TabViewItem>
        </muxc:TabView>

        <!-- Image Panel -->
        <Border Grid.Row="0" Grid.Column="2" Grid.RowSpan="1" Margin="10,0,0,10">
            <Image x:Name="OdooEntryImage" Source="ms-appx:///Assets/placeholder.png" Stretch="UniformToFill" Width="256" Height="274"/>
        </Border>

        <!-- Bottom Controls -->
        <Grid Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <CheckBox x:Name="ShowInactive"
                      Content="Show Deleted"
                      Grid.Column="1"
                      VerticalAlignment="Center"
                      Margin="0,0,10,0"/>
            <CommandBar x:Name="MoreTools"
                        Grid.Column="2"
                        DefaultLabelPosition="Right">
                <AppBarButton x:Name="AdditionalTools"
                              Label="Additional Tools"
                              Icon="More">
                    <AppBarButton.Flyout>
                        <MenuFlyout>
                            <MenuFlyoutItem x:Name="OdooRefreshDropdown" Text="Refresh View"/>
                            <MenuFlyoutItem x:Name="OdooSearchDropdown" Text="Search"/>
                            <MenuFlyoutItem x:Name="OdooManageTypesDropdown" Text="Manage File Types"/>
                        </MenuFlyout>
                    </AppBarButton.Flyout>
                </AppBarButton>
            </CommandBar>
        </Grid>
    </Grid>
</Page>
